
record(waveform, "$(D):SysMinMaxNom-Mon"){
    field(SCAN, "30 second")
    field(DTYP, "stream")
    field(INP,  "@Regatron.proto getArray(getSysMinMaxNom) $(P)")
    field(FTVL, "DOUBLE")
    field(NELM, "12")
    field(PRIO, "LOW")
}

record(ai, "$(D):SysMinVolt-Mon"){
    field(SCAN, "Passive")
    field(DESC, "Voltage Min")
    field(EGU,  "V")
    field(PREC, "2")
    field(DTYP, "Soft Channel")

    field(INP,  "$(D):SysMinMaxNom-Mon.VAL[0] CP MSS")
}

record(ai, "$(D):SysMinCurrent-Mon"){
    field(SCAN, "Passive")
    field(DESC, "Current Min")
    field(EGU,  "A")
    field(PREC, "2")
    field(DTYP, "Soft Channel")

    field(INP,  "$(D):SysMinMaxNom-Mon.VAL[1] CP MSS")
}

record(ai, "$(D):SysMinPwr-Mon"){
    field(SCAN, "Passive")
    field(DESC, "Power Min")
    field(EGU,  "kW")
    field(PREC, "2")
    field(DTYP, "Soft Channel")

    field(INP,  "$(D):SysMinMaxNom-Mon.VAL[2] CP MSS")
}

record(ai, "$(D):SysMinRes-Mon"){
    field(SCAN, "Passive")
    field(DESC, "Resistance Min")
    field(EGU,  "mOhm")
    field(PREC, "2")
    field(DTYP, "Soft Channel")

    field(INP,  "$(D):SysMinMaxNom-Mon.VAL[3] CP MSS")
}

record(ai, "$(D):SysMaxVolt-Mon"){
    field(SCAN, "Passive")
    field(DESC, "Voltage Max")
    field(EGU,  "V")
    field(PREC, "2")
    field(DTYP, "Soft Channel")

    field(INP,  "$(D):SysMinMaxNom-Mon.VAL[4] CP MSS")
}

record(ai, "$(D):SysMaxCurrent-Mon"){
    field(SCAN, "Passive")
    field(DESC, "Current Max")
    field(EGU,  "A")
    field(PREC, "2")
    field(DTYP, "Soft Channel")

    field(INP,  "$(D):SysMinMaxNom-Mon.VAL[5] CP MSS")
}

record(ai, "$(D):SysMaxPwr-Mon"){
    field(SCAN, "Passive")
    field(DESC, "Power Max")
    field(EGU,  "kW")
    field(PREC, "2")
    field(DTYP, "Soft Channel")

    field(INP,  "$(D):SysMinMaxNom-Mon.VAL[6] CP MSS")
}

record(ai, "$(D):SysMaxRes-Mon"){
    field(SCAN, "Passive")
    field(DESC, "Resistance Max")
    field(EGU,  "mOhm")
    field(PREC, "2")
    field(DTYP, "Soft Channel")

    field(INP,  "$(D):SysMinMaxNom-Mon.VAL[7] CP MSS")
}

record(ai, "$(D):SysNomVolt-Mon"){
    field(SCAN, "Passive")
    field(DESC, "Voltage Nominal")
    field(EGU,  "V")
    field(PREC, "2")
    field(DTYP, "Soft Channel")

    field(INP,  "$(D):SysMinMaxNom-Mon.VAL[8] CP MSS")
}

record(ai, "$(D):SysNomCurrent-Mon"){
    field(SCAN, "Passive")
    field(DESC, "Current Nominal")
    field(EGU,  "A")
    field(PREC, "2")
    field(DTYP, "Soft Channel")

    field(INP,  "$(D):SysMinMaxNom-Mon.VAL[9] CP MSS")
}

record(ai, "$(D):SysNomPwr-Mon"){
    field(SCAN, "Passive")
    field(DESC, "Power Nominal")
    field(EGU,  "kW")
    field(PREC, "2")
    field(DTYP, "Soft Channel")

    field(INP,  "$(D):SysMinMaxNom-Mon.VAL[10] CP MSS")
}

record(ai, "$(D):SysNomRes-Mon"){
    field(SCAN, "Passive")
    field(DESC, "Resistance Nominal")
    field(EGU,  "mOhm")
    field(PREC, "2")
    field(DTYP, "Soft Channel")

    field(INP,  "$(D):SysMinMaxNom-Mon.VAL[11] CP MSS")
}

record(waveform, "$(D):SysMon"){
    field(SCAN, "5 second")
    field(DTYP, "stream")
    field(INP,  "@Regatron.proto getArray(getSysReadings) $(P)")
    field(FTVL, "DOUBLE")
    field(NELM, "5")
    field(PRIO, "LOW")
}

record(ai, "$(D):SysOutVolt-Mon"){
    field(SCAN, "Passive")
    field(DESC, "System out voltage")
    field(EGU,  "V")
    field(PREC, "2")
    field(DTYP, "Soft Channel")

    field(INP,  "$(D):SysMon.VAL[0] CP MSS")
}

record(ai, "$(D):SysOutCurrent-Mon"){
    field(SCAN, "Passive")
    field(DESC, "System out current")
    field(EGU,  "A")
    field(PREC, "2")
    field(DTYP, "Soft Channel")

    field(INP,  "$(D):SysMon.VAL[1] CP MSS")
}

record(ai, "$(D):SysOutPwr-Mon"){
    field(SCAN, "Passive")
    field(DESC, "System out power")
    field(EGU,  "kW")
    field(PREC, "2")
    field(DTYP, "Soft Channel")

    field(INP,  "$(D):SysMon.VAL[2] CP MSS")
}

record(ai, "$(D):SysResPreset-Mon"){
    field(SCAN, "Passive")
    field(DESC, "System resistence preset")
    field(EGU,  "mOhm")
    field(PREC, "2")
    field(DTYP, "Soft Channel")

    field(INP,  "$(D):SysMon.VAL[3] CP MSS")
}

record(mbbi, "$(D):SysState-Mon") {
    field(SCAN, "Passive")
    field(DESC, "System state")
    field(DTYP, "Soft Channel")

    field(ZRST, "")
    field(ONST, "")
    field(TWST, "POWERUP")
    field(THST, "")
    field(FRST, "READY")
    field(FVST, "")
    field(SXST, "")
    field(SVST, "")
    field(EIST, "RUN")
    field(NIST, "")
    field(TEST, "WARN")
    field(ELST, "")
    field(TVST, "ERROR")
    field(TTST, "")
    field(FTST, "STOP")
    field(FFST, "")

    field(ZRSV, "")
    field(ONSV, "")
    field(TWSV, "")
    field(THSV, "")
    field(FRSV, "")
    field(FVSV, "")
    field(SXSV, "")
    field(SVSV, "")
    field(EISV, "")
    field(NISV, "")
    field(TESV, "")
    field(ELSV, "")
    field(TVSV, "")
    field(TTSV, "")
    field(FTSV, "")
    field(FFSV, "")

    field(INP,  "$(D):SysMon.VAL[4] CP MSS")
}

record(mbbi, "$(D):SysControlMode-Mon") {
    field(PINI, "NO")
    field(SCAN, "10 second")
    field(PHAS, "0")
    field(DESC, "System control mode")

    field(ZRST, "Constant Voltage")
    field(ONST, "Constant Current")
    field(TWST, "Constant Pwr")
    field(THST, "Usense limit active")
    field(FRST, "Psense limit active")
    field(FVST, "Current derating active")
    field(SXST, "")
    field(SVST, "")
    field(EIST, "")
    field(NIST, "")
    field(TEST, "")
    field(ELST, "")
    field(TVST, "")
    field(TTST, "")
    field(FTST, "")
    field(FFST, "")

    field(ZRSV, "")
    field(ONSV, "")
    field(TWSV, "")
    field(THSV, "")
    field(FRSV, "")
    field(FVSV, "")
    field(SXSV, "")
    field(SVSV, "")
    field(EISV, "")
    field(NISV, "")
    field(TESV, "")
    field(ELSV, "")
    field(TVSV, "")
    field(TTSV, "")
    field(FTSV, "")
    field(FFSV, "")

    field(DTYP, "stream")
    field(INP,  "@Regatron.proto getInt(getSysControlMode) $(P)")
}
